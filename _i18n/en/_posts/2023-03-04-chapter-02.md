---
layout: post
title: CHAPTER 2 Functional thinking in action
date:   2023-03-18 20:03:00 +0900
categories: en posts
permalink: /chapter-02/
---

In Chapter 2, we'll learn how to functionally think in the real world through Toni's Pizzeria. 

Toni runs a pizza shop in 2118 where everything is made of software. As the shop makes good sales these days, the owner of Pizzeria is planning to expand her business. She knows that functional programming can reduces the costs of changing codes. Therefore, the first step he takes is categorizing the Pizzeria codes into Action, Calculation, and Data.

* Action: spreading the dough, delivering pizza, ordering materials, etc.
* Calculation: doubling the pizza by recipe, making a grocery shopping list, etc.
* Data: pizza recipe, customer order, receipt, etc.

Then, as you can see below, she makes the three layers for the codes based on the rate of change. In other words, following ***stratified design***, Toni divided the code base into _Business rules_, _Domain rules_, and _Tech stack_.

![Organizing code by “rate of change”](https://drek4537l1klr.cloudfront.net/normand/Figures/f0020-01.jpg){: width="500"}

Until now, a single robot has made every pizza in the kitchen. By buying two more robots, Toni expects to speed up pizza-making. Here is the sequence of how to make a pizza.  

![As applied to a robotic kitchen](https://drek4537l1klr.cloudfront.net/normand/Figures/f0021-01.jpg){: width="500"}

Assume the three robots would do the tasks described in the ***timeline diagram*** above. Then, the part of preparing the materials can be assigned to each robot.     

![Timelines visualize distributed systems](https://drek4537l1klr.cloudfront.net/normand/Figures/f0022-01.jpg){: width="500"}

However, the process of making pizza requires the robots to work together. What if robot B took a dough away in the middle of the robot A making it? The dough must be incomplete, and eventually the customer will receive the ruined one. Oh no, that shouldn't happen. 

***Timeline cutting*** is the solution for this kind of situation. Mark the line above the task `Roll out dough`, which demands all the ingredients for the pizza. The line on the timeline diagram must be like this.

![Cutting the timeline](https://drek4537l1klr.cloudfront.net/normand/Figures/f0025-02.jpg){: width="500"}

Timeline cutting shows the prerequisites for each task and who the co-workers would be.


The following chapters will explain the details of the terminologies used above.


- ***Stratified design***: chapter 8, 9
- ***Timeline diagram***: chapter 15
- ***Timeline cutting***: chapter 16